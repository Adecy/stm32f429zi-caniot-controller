# -----------------------------------------------------------------------------

# Application specific

# TODO Set this to 0 and use newlibc heap instead
CONFIG_HEAP_MEM_POOL_SIZE=2048

CONFIG_HTTP_MAX_CONNECTIONS=3
CONFIG_HTTP_TEST=n
CONFIG_HTTP_TEST_SERVER=n

CONFIG_SYSTEM_MONITORING=y
CONFIG_CANTCP_SERVER=n

CONFIG_CANIOT_CONTROLLER=y
CONFIG_BLE_CONTROLLER=y

CONFIG_HA_EMULATED_DEVICES=n

CONFIG_LOG_BACKEND_FS=y
CONFIG_LOG_BACKEND_FS_OUTPUT_TEXT=y
CONFIG_LOG_BACKEND_FS_FILE_PREFIX="zephyr_"
CONFIG_LOG_BACKEND_FS_DIR="/SD:/logs"
CONFIG_LOG_BACKEND_FS_OVERWRITE=y
CONFIG_LOG_BACKEND_FS_FILE_SIZE=1048576
CONFIG_LOG_BACKEND_FS_FILES_LIMIT=100

CONFIG_CREDS_HARDCODED=n
CONFIG_CREDS_FLASH=y
CONFIG_CREDS_FS=n

# -----------------------------------------------------------------------------

# use code partition defined in the .overlay files
CONFIG_USE_DT_CODE_PARTITION=y

# -----------------------------------------------------------------------------

# CONFIG_LOG_BUFFER_SIZE=2048
# CONFIG_LOG_MODE_DEFERRED=n

# enable to immediate while debugging or when having immediate response is needed
# disable to log time sensitive functions (need a bit more RAM for a thread and pools)

# -----------------------------------------------------------------------------

CONFIG_ENTROPY_DEVICE_RANDOM_GENERATOR=y

CONFIG_ETH_STM32_HAL_RANDOM_MAC=n
CONFIG_ETH_STM32_HAL_MAC3=0x77
CONFIG_ETH_STM32_HAL_MAC4=0x77
CONFIG_ETH_STM32_HAL_MAC5=0x77

# not entropy in delay
CONFIG_NET_DHCPV4=y
CONFIG_NET_DHCPV4_INITIAL_DELAY_MAX=2
CONFIG_NET_DHCPV4_LOG_LEVEL_DBG=n

# -----------------------------------------------------------------------------

CONFIG_CAN=y
CONFIG_CAN_INIT_PRIORITY=80
CONFIG_CAN_MAX_FILTER=5
# this is default
# CONFIG_CAN_LOOPBACK_TX_MSGQ_SIZE=16
# CONFIG_CAN_LOOPBACK_TX_THREAD_PRIORITY=2
# CONFIG_CAN_LOOPBACK_TX_THREAD_STACK_SIZE=256
CONFIG_CAN_LOG_LEVEL_DBG=n
CONFIG_CAN_LOOPBACK=n

# -----------------------------------------------------------------------------

CONFIG_GPIO=y
CONFIG_PWM=y
CONFIG_PWM_LOG_LEVEL_DBG=y

# -----------------------------------------------------------------------------

CONFIG_SERIAL=y
CONFIG_UART_ASYNC_API=y
CONFIG_DMA_LOG_LEVEL_DBG=y
# CONFIG_UART_STM32=y (autoselected)

# -----------------------------------------------------------------------------

CONFIG_ADC=y
CONFIG_ADC_LOG_LEVEL_DBG=n

# -----------------------------------------------------------------------------

CONFIG_SENSOR=y
CONFIG_STM32_TEMP=y

# -----------------------------------------------------------------------------

CONFIG_UART_IPC=y
CONFIG_UART_IPC_FULL=y
CONFIG_UART_IPC_DEBUG_GPIO_STM32=n
CONFIG_UART_IPC_PING=y
CONFIG_UART_IPC_PING_PERIOD=1000
CONFIG_UART_IPC_STATS=y
CONFIG_UART_IPC_EVENT_API=y
CONFIG_UART_IPC_THREAD_START_DELAY=0

# -----------------------------------------------------------------------------

CONFIG_CANIOT_LIB=y
CONFIG_CANIOT_LOG_LEVEL=2
CONFIG_CANIOT_ASSERT=n
CONFIG_CANIOT_MAX_PENDING_QUERIES=6
CONFIG_CANIOT_DRIVERS_API=n
CONFIG_CANIOT_CTRL_DRIVERS_API=y

# -----------------------------------------------------------------------------

CONFIG_MY_STM32_HAL=y

# -----------------------------------------------------------------------------

CONFIG_AWS_ENDPOINT="a31gokdeokxhl8-ats.iot.eu-west-1.amazonaws.com"
CONFIG_AWS_THING_NAME="caniot_controller"